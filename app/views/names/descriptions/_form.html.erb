<!--[form:name_description]-->
<%= # form_for(:description,
    #          url: add_query_param(action: :new, id: @description.name_id)
    #         ) do |form| %>
<%= # form_for(:description,
    #          url: add_query_param(action: :edit, id: @description.id)
    #         ) do |form| %>
<%= form_with model: [:names, @description] do |f| %>

  <div class="max-width-text">
    <%= f.submit button_name, class: "btn mx-auto mt-3 mb-3" %>

    <%= render partial: "shared/form_description", locals: {form: f} %>

    <%= f.submit button_name, class: "btn mx-auto mt-3 mb-3" %>

    <p><strong><%= :DESCRIPTION.t %>:</strong></p>
    <%= render partial: "shared/textilize_help" %>

    <% rank = rank_as_lower_string(@description.parent.rank) %>
    <% for field in Name::Description.all_note_fields %>
      <div class="form-group">
        <%= f.label field, "form_names_#{field}".to_sym.t + ":" %>
        <p class="help-block mt-0">
          <%= "form_names_#{field}_help".to_sym.l(rank: rank) %>
        </p>
        <%= f.text_area field, rows: 10, class: "form-control" %>
      </div>
    <% end %>

    <%= f.submit button_name.t, class: "btn mx-auto mt-3" %>
  </div>

  <% if @merge %>
    <%= f.hidden_field :old_desc_id, @old_desc_id %>
    <%= f.hidden_field :delete_after, @delete_after %>
  <% end %>

<% end %>

<!--[eoform:name_description]-->
